# 03 –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è. Ansible-1


## –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ
1. [‚úî] –ù–∞–ø–∏—Å–∞—Ç—å service, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–∑ –≤ 30 —Å–µ–∫—É–Ω–¥ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ (—Ñ–∞–π–ª –ª–æ–≥–∞ –∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –¥–æ–ª–∂–Ω—ã –∑–∞–¥–∞–≤–∞—Ç—å—Å—è –≤ /etc/default).
2. [‚úî] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å spawn-fcgi –∏ —Å–æ–∑–¥–∞—Ç—å unit-—Ñ–∞–π–ª (spawn-fcgi.sevice) —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ–¥–µ–ª–∫–∏ init-—Å–∫—Ä–∏–ø—Ç–∞ (https://gist.github.com/cea2k/1318020).
3. [‚úî] –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å unit-—Ñ–∞–π–ª Nginx (nginx.service) –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

## –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –º–æ–µ–º—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é:
Playbook —Ä–∞—Å—á–∏—Ç–∞–Ω –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–∞ Debian. 

## –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è

–°–∫–∞—á–∏–≤–∞–µ–º –ø—Ä–æ–µ–∫—Ç:

  ```bash
  git clone https://github.com/shootnicks/otus_homework.git
  ```

–ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è

  ```bash
  cd ./otus_homework/12_Initialization_of_the_system._Systemd
  ```

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
* hosts.ini
  *–ø—Ä–æ–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª—ã —Ö–æ—Å—Ç–æ–≤*
* ansible.cfg
  *–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é **ansible_ssh_private_key_file***
*  unit.yml
  *–°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é **hosts***

#### üíª 1. [‚úî] –ù–∞–ø–∏—Å–∞—Ç—å service, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞–∑ –≤ 30 —Å–µ–∫—É–Ω–¥ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ (—Ñ–∞–π–ª –ª–æ–≥–∞ –∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –¥–æ–ª–∂–Ω—ã –∑–∞–¥–∞–≤–∞—Ç—å—Å—è –≤ /etc/default). –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å playbook:

  ```bash
  ansible-playbook unit.yml --tags unit_monitoring
  ```

<details>
<summary><strong> üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞</strong></summary>

<details>
<summary><strong>Debian 12</strong></summary>

–ù–∞ —Ü–µ–ª–µ–≤–æ–º —Ö–æ—Å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É

```bash
journalctl -n 20 -u watchlog.service
```
</details>
<details>
<summary><strong>Debian <11</strong></summary>

–ù–∞ —Ü–µ–ª–µ–≤–æ–º —Ö–æ—Å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É

```bash
tail -n 20 /var/log/syslog | grep word
```
</details>
</details>

#### üíª 2. [‚úî] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å spawn-fcgi –∏ —Å–æ–∑–¥–∞—Ç—å unit-—Ñ–∞–π–ª (spawn-fcgi.sevice) —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ–¥–µ–ª–∫–∏ init-—Å–∫—Ä–∏–ø—Ç–∞ (https://gist.github.com/cea2k/1318020). –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å playbook:

  ```bash
  ansible-playbook unit.yml --tags unit_spawn-fcgi
  ```

<details>
<summary><strong>üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞</strong></summary>

–ù–∞ —Ü–µ–ª–µ–≤–æ–º —Ö–æ—Å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É

```bash
systemctl status spawn-fcgi
```
</details>

#### üíª 3. [‚úî] –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å unit-—Ñ–∞–π–ª Nginx (nginx.service) –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å playbook:

  ```bash
  ansible-playbook unit.yml --tags unit_nginx
  ```

<details>
<summary><strong>üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–∏—Å–∞</strong></summary>

–ù–∞ —Ü–µ–ª–µ–≤–æ–º —Ö–æ—Å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É

```bash
systemctl status nginx@first
systemctl status nginx@second
```
</details>

## –ì–æ—Ç–æ–≤–æ
